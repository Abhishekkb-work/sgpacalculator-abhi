<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=1024, user-scalable=yes"> <!-- Allow zooming -->
  <meta name="theme-color" content="#000000">
  <title>SGPA Calculator</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="icon-192.png">

  <a href="abhii.html" id="designerProfileBtn">↪  View Abhishek's Profile</a>
  <a href="abhisgpa.html" id="feedbackFloatingBtn">Give Feedback</a>

  <style>
    html {
      font-size: 62.5%; /* 1rem = 10px */
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: none !important;
      color: #333;
      margin: 0;
      padding: 20px;
      font-size: 1.6rem;
      line-height: 1.6;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }

    .container {
  width: 100vw;
  max-width: 100vw;
  height: 100vh;
  margin: 0;
  background-color: transparent;
  padding: 0;
  border-radius: 0;
  box-shadow: none;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
}

    h1 {
      text-align: center;
      color: #007bff;
      font-size: 3.6rem;
      margin-bottom: 1rem;
      font-weight: 700;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
    }

    .small-text {
      text-align: center;
      font-size: 1.2rem;
      font-weight: 600;
      color: #666;
      margin-bottom: 2.5rem;
    }

    .footer-text {
      text-align: center;
      font-size: 1.1rem;
      color: #999;
      margin-top: 3rem;
      padding-top: 1.5rem;
      border-top: 1px solid #eee;
    }

    label {
      font-weight: 600;
      display: block;
      margin-bottom: 0.8rem;
      color: #444;
    }

    input[type="text"], input[type="number"], select {
      padding: 1.2rem 1.5rem;
      border: 1px solid #cceeff;
      border-radius: 8px;
      background-color: #f9fcff;
      width: calc(100% - 3rem);
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
      transition: all 0.3s ease;
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
    }

    input[type="text"]:focus, input[type="number"]:focus, select:focus {
      border-color: #007bff;
      box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.25);
      outline: none;
      background-color: #fff;
    }

    select {
      appearance: none;
      background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007bff%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13%205.7L146.2%20202.7%2018.4%2075.1a17.6%2017.6%200%200%200-25.7%2023.1l138.4%20140c6.6%206.6%2017.2%206.6%2023.9%200l138.4-140a17.6%2017.6%200%200%200-13-29.8z%22%2F%3E%3C%2Fsvg%3E');
      background-repeat: no-repeat;
      background-position: right 1.5rem top 50%;
      background-size: 1rem auto;
      padding-right: 3.5rem;
    }

    .section {
      background: #f0f8ff;
      padding: 2rem;
      border-radius: 10px;
      margin-top: 2rem;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      border: 1px solid #e0f0ff;
      display: none;
    }

    .section h2 {
      color: #0056b3;
      font-size: 2.2rem;
      margin-top: 0;
      margin-bottom: 2rem;
      border-bottom: 2px solid #cfe8ff;
      padding-bottom: 0.8rem;
    }

    .subject-row {
      margin-bottom: 2.5rem;
      padding: 1.5rem;
      border: 1px solid #b3d9ff;
      border-radius: 8px;
      background-color: #e9f5ff;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      align-items: flex-end;
    }

    .subject-row > div {
      flex: 1;
      min-width: 150px;
    }

    .subject-row input {
        margin-bottom: 0;
    }

    .action-buttons {
      text-align: center;
      margin-top: 3.5rem;
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      flex-wrap: wrap;
    }

    .action-buttons button {
  background-color: #007bff;
  color: white;
  border: none;
  padding: 1.4rem 2.8rem;
  font-size: 1.6rem;
  font-weight: 600;
  border-radius: 8px;
  cursor: pointer;
  transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
  box-shadow: 0 4px 10px rgba(0, 123, 255, 0.2);
  width: 100%;
  max-width: 300px;
  text-align: center;
}

.action-buttons button:hover {
  background-color: #0056b3;
  transform: translateY(-2px);
  box-shadow: 0 6px 15px rgba(0, 123, 255, 0.3);
}


    #result {
      font-size: 1.8rem;
      font-weight: 600;
      margin-top: 3rem;
      white-space: pre-line;
      background-color: #e0ffe0;
      border: 1px solid #28a745;
      padding: 2rem;
      border-radius: 10px;
      color: #1a5e20;
      max-width: 90%;
      margin-left: auto;
      margin-right: auto;
      text-align: center;
      box-shadow: 0 4px 15px rgba(40, 167, 69, 0.15);
    }

    #result strong {
      color: #0056b3;
    }

    #result div:first-child {
      font-size: 3.2rem;
      margin-bottom: 1.5rem;
      color: #007bff;
      font-weight: 700;
    }

    #initial-form,
    #cycleSelection,
    #eeeCycleSelection {
      background: #f0f8ff;
      padding: 2.5rem;
      border-radius: 10px;
      margin-bottom: 2rem;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
      border: 1px solid #e0f0ff;
      max-width: 100%;
      margin-left: auto;
      margin-right: auto;
    }

    #initial-form label {
        margin-bottom: 1.5rem;
    }

    /* Floating Buttons General Style */
    #designerProfileBtn,
    #feedbackFloatingBtn {
      position: fixed;
      right: 20px;
      padding: 1.2rem 2rem;
      font-size: 1.4rem;
      font-weight: 600;
      text-decoration: none;
      border-radius: 8px;
      z-index: 9999;
      transition: background 0.3s ease, transform 0.3s ease;
      animation: floatFade 3s ease-in-out infinite;
      color: white;
    }

    #designerProfileBtn {
      bottom: 70px;
      background: #007bff; /* Set profile button as blue */
      box-shadow: 0 8px 20px rgba(0, 123, 255, 0.3);
    }

    #feedbackFloatingBtn {
      bottom: 20px;
      background: #0077cc;
      box-shadow: 0 8px 20px rgba(0, 119, 204, 0.3);
    }

    #designerProfileBtn:hover {
      background: #0056b3;
      transform: translateY(-3px);
    }

    #feedbackFloatingBtn:hover {
      background: #005fa3;
      transform: translateY(-3px);
    }

    @keyframes floatFade {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-3px);
      }
    }

    /* --- New Styles for Informative Sections and Modal --- */
    .grid {
        display: grid;
    }

    @media (min-width: 768px) {
        .md\:grid-cols-2 {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }
    }

    .gap-8 { gap: 8rem; }
    .gap-6 { gap: 6rem; }
    .gap-4 { gap: 4rem; }
    .gap-2 { gap: 2rem; }
    .mb-8 { margin-bottom: 8rem; }
    .mb-6 { margin-bottom: 6rem; }
    .mb-4 { margin-bottom: 4rem; }
    .mb-3 { margin-bottom: 3rem; }
    .mb-2 { margin-bottom: 2rem; }
    .mt-1 { margin-top: 1rem; }
    .mt-2 { margin-top: 2rem; }
    .mt-4 { margin-top: 4rem; }

    .bg-white { background-color: #fff; }
    .rounded-lg { border-radius: 0.8rem; }
    .custom-shadow { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
    .p-6 { padding: 6rem; }
    .text-xl { font-size: 2rem; }
    .font-semibold { font-weight: 600; }
    .font-bold { font-weight: 700; }
    .text-gray-800 { color: #2d3748; }
    .text-gray-600 { color: #4a5568; }
    .list-disc { list-style-type: disc; }
    .pl-5 { padding-left: 5rem; }
    .space-y-2 > :not([hidden]) ~ :not([hidden]) { margin-top: 2rem; }
    .border-b { border-bottom-width: 1px; }
    .border-gray-200 { border-color: #edf2f7; }
    .border-gray-300 { border-color: #e2e8f0; }
    .bg-gray-50 { background-color: #f9fafb; }
    .border { border-width: 1px; }
    .rounded-md { border-radius: 0.6rem; }
    .bg-blue-50 { background-color: #eff6ff; }
    .text-gray-700 { color: #4a5568; }
    .overflow-x-auto { overflow-x: auto; }
    .min-w-full { min-width: 100%; }
    table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 2rem;
    }
    th, td {
        border: 1px solid #e2e8f0;
        padding: 1.2rem;
        text-align: left;
        font-size: 1.4rem;
    }
    th {
        background-color: #f7fafc;
        font-weight: 600;
        color: #2d3748;
    }
    tbody tr:nth-child(even) {
        background-color: #f0f8ff;
    }
    .font-medium { font-weight: 500; }

    #grade-card-modal {
      position: fixed;
      inset: 0;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      padding: 20px;
    }

    #grade-card-modal > div {
      background-color: #fff;
      border-radius: 12px;
      padding: 30px;
      max-width: 900px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      position: relative;
    }

    #grade-card-modal h3 {
        font-size: 2.8rem;
        font-weight: 700;
        color: #007bff;
        margin-bottom: 2rem;
        text-align: center;
    }

    #grade-card-modal .flex {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    #grade-card-modal .mb-6 {
        margin-bottom: 2.4rem;
    }

    #grade-card-modal .close-button {
        background: none;
        border: none;
        font-size: 2.4rem;
        cursor: pointer;
        color: #666;
        position: absolute;
        top: 15px;
        right: 15px;
        padding: 5px;
        line-height: 1;
    }
    #grade-card-modal .close-button:hover {
        color: #333;
    }

    #grade-card-content {
        border: 2px solid #007bff;
        border-radius: 10px;
        padding: 2rem;
        background-color: #f0f8ff;
        position: relative;
    }

    #grade-card-content p {
        font-size: 1.6rem;
        margin-bottom: 1rem;
    }

    #grade-card-content table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 2rem;
    }
    #grade-card-content th, #grade-card-content td {
        border: 1px solid #b3d9ff;
        padding: 1.2rem;
        text-align: left;
        font-size: 1.5rem;
    }
    #grade-card-content th {
        background-color: #cfe8ff;
        font-weight: 600;
        color: #0056b3;
    }
    #grade-card-content tbody tr:nth-child(even) {
        background-color: #e9f5ff;
    }

    .grade-card-footer {
        font-size: 1.2rem;
        color: rgba(0, 0, 0, 0.4);
        text-align: center;
        margin-top: 2rem;
    }

    #generateGradeCardBtnBottom {
        display: block;
        margin: 2rem auto;
        background-color: #28a745;
        color: white;
        border: none;
        padding: 1.4rem 2.8rem;
        font-size: 1.6rem;
        font-weight: 600;
        border-radius: 8px;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
        box-shadow: 0 4px 10px rgba(40, 167, 69, 0.2);
    }
    #generateGradeCardBtnBottom:hover {
        background-color: #218838;
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(40, 167, 69, 0.3);
    }

    .grade-card-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        font-size: 1.4rem;
        color: #333;
        padding-bottom: 1rem;
        border-bottom: 1px solid #ccc;
    }
    .grade-card-header .left,
    .grade-card-header .right {
        flex-basis: 30%;
        text-align: left;
    }
    .grade-card-header .center {
        flex-basis: 40%;
        text-align: center;
        font-weight: bold;
        font-size: 2rem;
        color: #0056b3;
    }
    .grade-card-header .right {
        text-align: right;
    }

    .grade-card-final-sgpa {
        text-align: center;
        font-size: 2.8rem;
        font-weight: 700;
        color: #007bff;
        margin-top: 2.5rem;
        padding-top: 1.5rem;
        border-top: 2px solid #cfe8ff;
    }

    .grid > div,
    .bg-white.rounded-lg.custom-shadow.p-6.mb-8 {
        background: linear-gradient(135deg, #f8faff 0%, #e0f2f7 100%);
        border: 1px solid #d0e8f2;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .grid > div:hover,
    .bg-white.rounded-lg.custom-shadow.p-6.mb-8:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
    }

    @media print {
      html, body {
        margin: 0;
        padding: 0;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      html {
        font-size: 70%;
      }

      body {
        font-size: 1.2rem;
        background-color: #fff;
        color: #000;
        padding: 10px;
        box-shadow: none;
      }

      .container {
        padding: 0;
        box-shadow: none;
        border-radius: 0;
        max-width: 100%;
      }

      h1 {
        font-size: 2.2rem;
        margin-bottom: 0.5rem;
        color: #000;
      }

      .small-text, .footer-text {
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
        margin-top: 0.5rem;
        color: #333;
      }

      #designerProfileBtn,
      #feedbackFloatingBtn,
      .action-buttons,
      #generateGradeCardBtnBottom,
      .grid,
      #grade-card-modal {
        display: none !important;
      }

      #initial-form,
      #cycleSelection,
      #eeeCycleSelection,
      .section {
        background: #fff;
        padding: 0.8rem;
        border-radius: 0;
        box-shadow: none;
        border: 1px solid #ddd;
        margin-bottom: 0.8rem;
        margin-top: 0.5rem;
      }

      label {
        font-size: 1rem;
        margin-bottom: 2px;
      }

      input[type="text"], input[type="number"], select {
        padding: 0.3rem 0.5rem;
        font-size: 1rem;
        border: 1px solid #aaa;
        margin-top: 2px;
      }

      select {
        background-image: none;
      }

      .subject-row {
        margin-bottom: 0.8rem;
        padding: 0.5rem;
        border: 1px solid #ccc;
        background-color: #f9f9f9;
        box-shadow: none;
        page-break-inside: avoid;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .subject-row > div:nth-child(2) {
          display: none !important;
      }

      .subject-row label,
      .subject-row input {
          flex-shrink: 0;
          width: auto;
      }

      .subject-row input[type="text"] {
          flex-grow: 1;
          max-width: 60%;
      }

      .subject-row input[type="number"] {
          width: 5rem;
          text-align: center;
      }

      #result {
        font-size: 1.4rem;
        padding: 1rem;
        margin-top: 1.5rem;
        border: 2px solid #1e90ff;
        background-color: #e8f0ff;
        color: #003366;
        text-align: left;
        max-width: 95%;
        page-break-before: avoid;
      }

      #result div:first-child {
        font-size: 2.5rem;
        margin-bottom: 0.8rem;
      }
    }

    /* Responsive and better mobile zoom experience */
    @media screen and (max-width: 768px) {
      html {
        font-size: 62.5%;
      }
      .container {
        padding: 10px;
      }
      .action-buttons {
        flex-direction: column;
        gap: 1rem;
      }
      .action-buttons button {
        width: 100%;
        padding: 1.2rem 2rem;
      }
      #grade-card-modal > div {
        padding: 10px;
        max-width: 100vw;
        width: 98vw;
      }
      .section {
        padding: 1rem;
      }
      .p-6 {
        padding: 2rem;
      }
      th, td {
        padding: 0.8rem;
        font-size: 1.2rem;
      }
      #grade-card-modal h3 {
        font-size: 2.2rem;
      }
      #grade-card-content th, #grade-card-content td {
        font-size: 1.3rem;
      }
      .grade-card-header .center {
          font-size: 1.6rem;
      }
    }

    @media screen and (max-width: 480px) {
      html {
        font-size: 55%;
      }
      .subject-row {
        flex-direction: column;
        align-items: stretch;
      }
      .subject-row > div {
        min-width: unset;
        width: 100%;
      }
      input[type="text"], input[type="number"], select {
        width: calc(100% - 3rem);
      }
      .p-6 {
        padding: 1rem;
      }
      th, td {
        padding: 0.6rem;
        font-size: 1rem;
      }
      #grade-card-modal > div {
        padding: 0.5rem;
        max-width: 100vw;
        width: 99vw;
      }
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
  <div class="container">
    <h1>SGPA CALCULATOR</h1>
    <div class="small-text">Created with ❤️ by ABHISHEK__BAGEWADI</div>

    <div id="initial-form">
      <label for="fullName">Enter Full Name:</label>
      <input type="text" id="fullName" oninput="this.value = this.value.toUpperCase()" placeholder="e.g., ABHISHEK" />
      <label for="streamSelect">Select Stream:</label>
      <select id="streamSelect" onchange="handleStreamSelection()">
        <option value="">--Select--</option>
        <option value="cse">CSE Stream (CS / AIML / CSBS / IS / CSDS / Other)</option>
        <option value="eee">EEE Stream  (EE / EC / Other)</option>
        <option value="other">Other (Mech / Civil / Other)</option> </select>
    </div>

    <div id="cycleSelection" class="section">
      <h2>Select Cycle (CSE)</h2>
      <label for="cycleSelect">Select Cycle:</label>
      <select id="cycleSelect" onchange="handleCycleSelection()">
        <option value="">--Select--</option>
        <option value="physics">Physics Cycle</option>
        <option value="chemistry">Chemistry Cycle</option>
      </select>
    </div>

    <div id="eeeCycleSelection" class="section">
      <h2>Select Cycle (EEE)</h2>
      <label for="eeeCycleSelect">Select Cycle:</label>
      <select id="eeeCycleSelect" onchange="handleEEECycleSelection()">
        <option value="">--Select--</option>
        <option value="eeePhysics">Physics Cycle</option>
        <option value="eeeChemistry">Chemistry Cycle</option>
      </select>
    </div>

    <div id="eeeSubjects" class="section">
      <h2>EEE Subjects</h2>
      <div id="eeeInputs"></div>
    </div>

    <div id="cseSubjects" class="section">
      <h2>CSE Subjects</h2>
      <div id="cseInputs"></div>
    </div>

    <div id="otherSubjects" class="section">
      <h2>Custom Subjects</h2>
      <div id="otherInputs"></div>
    </div>

       <div class="action-buttons">
  <button id="calculateSGPAButton" onclick="calculateSGPA()">Calculate SGPA</button>
  <button id="resetDataBtn" onclick="resetData()">Reset Data</button>
  <button id="generateGradeCardBtnBottom" onclick="generateTemporaryGradeCardAndDownload()">Generate Temporary Grade Card</button>
  <button id="sharePdfBtn" onclick="shareResultAsPdf()">Share Result as PDF</button>
</div>

        <div id="result" style="display: none;"></div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8" style="margin-top: 3rem;">
            <div class="bg-white rounded-lg custom-shadow p-6">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Where do we need SGPA in our life?</h3>
                <p class="text-gray-600 mb-3">SGPA (Semester Grade Point Average) is a crucial academic metric that plays a significant role in a student's educational journey:</p>
                <ul class="list-disc pl-5 text-gray-600 space-y-2">
                    <li><span class="font-medium">Scholarships and Financial Aid:</span> Many scholarships require maintaining a minimum SGPA/CGPA.</li>
                    <li><span class="font-medium">Placements and Internships:</span> Companies often set CGPA cutoffs during campus recruitment.</li>
                    <li><span class="font-medium">Higher Education:</span> Graduate schools and universities abroad consider CGPA as an important admission criterion.</li>
                    <li><span class="font-medium">Academic Progress:</span> SGPA helps track your semester-wise performance and identify areas for improvement.</li>
                </ul>
            </div>

            <div class="bg-white rounded-lg custom-shadow p-6">
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Why do we need to calculate SGPA?</h3>
                <p class="text-gray-600 mb-3">VTU follows the Choice Based Credit System (CBCS) where performance is measured using SGPA and CGPA. While the university provides these scores, there2 are several reasons to calculate them yourself:</p>
                <ul class="list-disc pl-5 text-gray-600 space-y-2">
                    <li>Official grade cards may not provide detailed breakdowns of how the SGPA was calculated.</li>
                    <li>You can verify the accuracy of your official results.</li>
                    <li>Calculate your expected SGPA before official results are announced.</li>
                    <li>Understand how different grade combinations affect your overall SGPA.</li>
                    <li>Plan your academic strategy to achieve desired CGPA targets.</li>
                </ul>
            </div>
        </div>

        <div class="bg-white rounded-lg custom-shadow p-6 mb-8" style="margin-top: 3rem;">
            <h3 class="text-xl font-semibold text-gray-800 mb-4">How to calculate SGPA?</h3>
            <p class="text-gray-600 mb-4">The SGPA calculation for VTU follows a specific formula based on credits and grade points:</p>

            <div class="mb-6">
                <h4 class="font-medium text-gray-800 mb-2">Step 1: Understand the Grade Point System</h4>
                <div class="overflow-x-auto">
                    <table class="min-w-full">
                        <thead>
                            <tr>
                                <th>Letter Grade</th>
                                <th>Grade Points</th>
                                <th>Level of Performance</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>O</td><td>10</td><td>Outstanding</td></tr>
                            <tr><td>A+</td><td>9</td><td>Excellent</td></tr>
                            <tr><td>A</td><td>8</td><td>Very Good</td></tr>
                            <tr><td>B+</td><td>7</td><td>Good</td></tr>
                            <tr><td>C</td><td>5</td><td>Average</td></tr>
                            <tr><td>P</td><td>4</td><td>Pass</td></tr>
                            <tr><td>F</td><td>0</td><td>Fail</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="mb-6">
                <h4 class="font-medium text-gray-800 mb-2">Step 2: Apply the SGPA Formula</h4>
                <div class="bg-gray-50 p-4 rounded-md border border-gray-200">
                    <p class="text-gray-700 font-medium">SGPA = Σ(Ci × GPi) / ΣCi</p>
                    <p class="text-gray-600 mt-2">Where:</p>
                    <ul class="list-disc pl-5 text-gray-600 mt-1">
                        <li>Ci = Credits for the ith course</li>
                        <li>GPi = Grade Point obtained for the ith course</li>
                        <li>ΣCi = Sum of credits of all courses in that semester</li>
                    </ul>
                </div>
            </div>

            <div>
                <h4 class="font-medium text-gray-800 mb-2">Example Calculation</h4>
                <div class="overflow-x-auto">
                    <table class="min-w-full">
                        <thead>
                            <tr>
                                <th>Subject</th>
                                <th>Credits (C)</th>
                                <th>Grade</th>
                                <th>Grade Points (GP)</th>
                                <th>C × GP</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Engineering Mathematics</td><td>4</td><td>A</td><td>8</td><td>32</td></tr>
                            <tr><td>Data Structures</td><td>3</td><td>A+</td><td>9</td><td>27</td></tr>
                            <tr><td>Computer Networks</td><td>4</td><td>B+</td><td>7</td><td>28</td></tr>
                            <tr><td>Database Systems</td><td>3</td><td>O</td><td>10</td><td>30</td></tr>
                            <tr><td>Programming Lab</td><td>2</td><td>A</td><td>8</td><td>16</td></tr>
                            <tr class="font-medium"><td>Total</td><td>16</td><td></td><td></td><td>133</td></tr>
                        </tbody>
                    </table>
                </div>
                <div class="mt-4 bg-blue-50 p-4 rounded-md">
                    <p class="text-gray-700">SGPA = Σ(C × GP) / ΣC = 133 / 16 = <span class="font-bold">8.31</span></p>
                    <p class="text-gray-700 mt-2">Percentage Equivalent = 8.31 - 0.75 × 10 = <span class="font-bold">75.6%</span></p>

                    <div class="footer-text"> THIS WEB IS CREATED BY :   A B H I S H E K _ B A G E W A D I</div>
                </div>
            </div>
        </div>
    </div>

    <div id="grade-card-modal" style="display: none;">
        <div>
            <button id="close-modal" class="close-button">X</button>
            <h3>Temporary Grade Card</h3>

            <div id="grade-card-content">
                </div>
        </div>
    </div>

    <script>
        const eeePhysicsCycleData = [
            ["Mathematics - for EEE Stream", "BMATEX01", 4],
            ["Applied Physics for EEE Stream", "BPHYEX02", 4],
            ["Basic Electronics", "BEEEX03", 3],
            ["Introduction to C Programming", "BESCKx04x", 3],
            ["Global Climate Change", "BETCKx05x / BPLCKx05x", 3],
            ["Professional Writing Skills in English", "BENGKx06/BPWSKx06", 1],
            ["Samskrutika Kannada / Balake Kannada", "BKSKKx07/BKBKKx07", 1],
            ["Innovation and Design Thinking", "BIDTKx58", 1]
        ];
        const eeeChemistryCycleData = [
            ["Mathematics - for EEE Stream", "BMATS201", 4],
            ["Applied Chemistry for EEE Stream", "BCHES202", 4],
            ["Computer-Aided Engineering Drawing", "BCEDKx03", 3],
            ["Introduction to Electrical Engineering", "BESCKx04x", 3],
            ["Introduction to Python Programming", "BPLCKx05x", 3],
            ["Professional Writing Skills in English", "BPWSKx06", 1],
            ["Indian Constitution", "BICOKx07", 1],
            ["Scientific Foundations of Health", "BSFHKx58", 1]
        ];
        const csePhysicsCycleData = [
            ["Mathematics - for CSE Stream", "BMATEX01", 4],
            ["Applied Physics for CSE Stream", "BPHYEX02", 4],
            ["Principles of Programming Using C", "BCSESC203", 3],
            ["Introduction to Electronics Communication", "BECESC204C", 3],
            ["Global Climate Change", "BETCKx05x / BPLCKx05x", 3],
            ["Communicative English / Professional Writing Skills", "BENGKx06/BPWSKx06", 1],
            ["Samskrutika Kannada / Balake Kannada", "BKSKKx07/BKBKKx07", 1],
            ["Innovation and Design Thinking", "BIDTKx58", 1]
        ];
        const cseChemistryCycleData = [
            ["Mathematics - for CSE Stream", "BMATS201", 4],
            ["Applied Chemistry for CSE Stream", "BCHES202", 4],
            ["Computer-Aided Engineering Drawing", "BCEDKx03", 3],
            ["Introduction to Mechanical Engineering", "BESCKx04x", 3],
            ["Introduction to Python Programming", "BPLCKx05x", 3],
            ["Professional Writing Skills in English", "BPWSKx06", 1],
            ["Indian Constitution", "BICOKx07", 1],
            ["Scientific Foundations of Health", "BSFHKx58", 1]
        ];

        let calculatedSGPA = "N/A";
        let subjectResults = [];

        // Function to control initial button and result visibility
        function initializePageVisibility() {
            document.getElementById("calculateSGPAButton").style.display = "inline-block";
            document.getElementById("resetDataBtn").style.display = "none";
            document.getElementById("generateGradeCardBtnBottom").style.display = "none";
            document.getElementById("sharePdfBtn").style.display = "none";
            document.getElementById("result").style.display = "none";
            // Ensure informative sections are visible if they have different IDs
            // If they are part of the "result" div, they would be hidden.
            // Based on the provided HTML, they are separate and always visible.
        }

        function handleStreamSelection() {
            const stream = document.getElementById("streamSelect").value;
            document.getElementById("cycleSelection").style.display = "none";
            document.getElementById("eeeCycleSelection").style.display = "none";
            document.getElementById("cseSubjects").style.display = "none";
            document.getElementById("eeeSubjects").style.display = "none";
            document.getElementById("otherSubjects").style.display = "none";
            if (stream === "cse") {
                document.getElementById("cycleSelection").style.display = "block";
            } else if (stream === "eee") {
                document.getElementById("eeeCycleSelection").style.display = "block";
            } else if (stream === "other") {
                document.getElementById("otherSubjects").style.display = "block";
                fillOtherInputs();
            }
            initializePageVisibility(); // Reset button visibility on stream change
        }

        function handleCycleSelection() {
            const cycle = document.getElementById("cycleSelect").value;
            document.getElementById("cseSubjects").style.display = "none";
            if (cycle === "physics") {
                fillInputs("cseInputs", csePhysicsCycleData);
                document.getElementById("cseSubjects").style.display = "block";
            } else if (cycle === "chemistry") {
                fillInputs("cseInputs", cseChemistryCycleData);
                document.getElementById("cseSubjects").style.display = "block";
            }
            initializePageVisibility(); // Reset button visibility on cycle change
        }

        function handleEEECycleSelection() {
            const cycle = document.getElementById("eeeCycleSelect").value;
            document.getElementById("eeeSubjects").style.display = "none";
            if (cycle === "eeePhysics") {
                fillInputs("eeeInputs", eeePhysicsCycleData);
                document.getElementById("eeeSubjects").style.display = "block";
            } else if (cycle === "eeeChemistry") {
                fillInputs("eeeInputs", eeeChemistryCycleData);
                document.getElementById("eeeSubjects").style.display = "block";
            }
            initializePageVisibility(); // Reset button visibility on cycle change
        }

        function fillInputs(containerId, subjectsData) {
            const container = document.getElementById(containerId);
            container.innerHTML = "";
            subjectsData.forEach((subj, index) => {
                container.innerHTML += `
                    <div class='subject-row'>
                        <div>
                            <label>Subject Name:</label>
                            <input type='text' value='${subj[0]}' readonly />
                        </div>
                        <div>
                            <label>Subject Code:</label>
                            <input type='text' value='${subj[1]}' readonly />
                        </div>
                        <div>
                            <label>Marks:</label>
                            <input type='number' id='${containerId}_sub${index}_marks' />
                        </div>
                        <div>
                            <label>Credits:</label>
                            <input type='number' value='${subj[2]}' id='${containerId}_sub${index}_credits' readonly />
                        </div>
                    </div>
                `;
            });
        }

        function fillOtherInputs() {
            const container = document.getElementById("otherInputs");
            container.innerHTML = "";
            for (let i = 0; i < 8; i++) {
                container.innerHTML += `
                    <div class='subject-row'>
                        <div>
                            <label>Subject Name:</label>
                            <input type='text' class='otherSubjectName' placeholder='Subject ${i + 1}' />
                        </div>
                        <div>
                            <label>Marks:</label>
                            <input type='number' class='otherMarks' placeholder='Marks' />
                        </div>
                        <div>
                            <label>Credits:</label>
                            <input type='number' class='otherCredits' placeholder='Credits' />
                        </div>
                    </div>
                `;
            }
        }

        function getGradePoint(score) {
            if (score >= 90) return 10;
            else if (score >= 80) return 9;
            else if (score >= 70) return 8;
            else if (score >= 60) return 7;
            else if (score >= 45) return 6;
            else if (score >= 40) return 4;
            else return 0;
        }

        function getLetterGrade(score) {
            if (score >= 90) return 'O';
            else if (score >= 80) return 'A+';
            else if (score >= 70) return 'A';
            else if (score >= 60) return 'B+';
            else if (score >= 45) return 'B';
            else if (score >= 40) return 'P';
            else return 'F';
        }

        function validateInputs(forDownload = false) {
            const fullName = document.getElementById("fullName").value.trim();
            const stream = document.getElementById("streamSelect").value;

            if (!fullName) {
                alert("Please enter your Full Name.");
                return false;
            }
            if (!stream) {
                alert("Please select your Stream (CSE, EEE, or Other).");
                return false;
            }

            let marksInputs;
            let selectedCycle;
            let activeSectionId = '';

            if (stream === "cse") {
                selectedCycle = document.getElementById("cycleSelect").value;
                if (!selectedCycle) {
                    alert("Please select your Cycle (Physics or Chemistry) for CSE Stream.");
                    return false;
                }
                marksInputs = document.querySelectorAll("#cseInputs input[id$='_marks']");
                activeSectionId = 'cseSubjects';
            } else if (stream === "eee") {
                selectedCycle = document.getElementById("eeeCycleSelect").value;
                if (!selectedCycle) {
                    alert("Please select your Cycle (Physics or Chemistry) for EEE Stream.");
                    return false;
                }
                marksInputs = document.querySelectorAll("#eeeInputs input[id$='_marks']");
                activeSectionId = 'eeeSubjects';
            } else if (stream === "other") {
                marksInputs = document.querySelectorAll("#otherInputs .otherMarks");
                activeSectionId = 'otherSubjects';
            } else {
                alert("Please select a valid Stream.");
                return false;
            }

            if (document.getElementById(activeSectionId).style.display === 'none') {
                alert("Please select a valid cycle to display subjects before calculating.");
                return false;
            }

            let allMarksFilled = true;
            for (let i = 0; i < marksInputs.length; i++) {
                if (!marksInputs[i].value || isNaN(parseFloat(marksInputs[i].value))) {
                    allMarksFilled = false;
                    break;
                }
            }

            if (!allMarksFilled) {
                alert("Please ensure all subject marks are filled.");
                return false;
            }

            return true;
        }

        function calculateSGPA() {
            if (!validateInputs(false)) {
                return;
            }

            let marksInputs = document.querySelectorAll("input[id$='_marks'], .otherMarks");
            let creditsInputs = document.querySelectorAll("input[id$='_credits'], .otherCredits");

            let totalWeightedGradePoints = 0;
            let totalCredits = 0;
            subjectResults = [];

            marksInputs.forEach((markInput, index) => {
                const score = parseFloat(markInput.value);
                const credit = parseFloat(creditsInputs[index].value);

                let subjectName;
                if (markInput.classList.contains('otherMarks')) {
                    subjectName = markInput.closest('.subject-row').querySelector('.otherSubjectName').value || `Custom Subject ${index + 1}`;
                } else {
                    subjectName = markInput.closest('.subject-row').querySelector("input[type='text']:not([id*='_credits'])").value;
                }

                if (!isNaN(score) && !isNaN(credit) && score >= 0 && credit >= 0) {
                    let gradePoint = getGradePoint(score);
                    let letterGrade = getLetterGrade(score);

                    totalWeightedGradePoints += gradePoint * credit;
                    totalCredits += credit;

                    subjectResults.push({
                        name: subjectName,
                        marks: score,
                        credits: credit,
                        gradePoint: gradePoint,
                        letterGrade: letterGrade
                    });
                } else {
                    subjectResults.push({
                        name: subjectName,
                        marks: score,
                        credits: credit,
                        gradePoint: 'N/A',
                        letterGrade: 'N/A',
                        invalid: true
                    });
                }
            });

            if (totalCredits > 0) {
                calculatedSGPA = (totalWeightedGradePoints / totalCredits).toFixed(2);
            } else {
                calculatedSGPA = "N/A";
            }

            const name = document.getElementById("fullName").value || "Student";
            const streamSelectElement = document.getElementById("streamSelect");
            const stream = streamSelectElement.options[streamSelectElement.selectedIndex].text || "Not Selected";

            document.getElementById("result").innerHTML = `
                <div style="text-align: center; font-weight: bold; margin-bottom: 16px; color: #1e90ff;">
                    SGPA = ${calculatedSGPA}
                </div>
                <strong>Name:</strong> ${name}<br>
                <strong>Stream:</strong> ${stream}<br>
                <strong>Total Credits:</strong> ${totalCredits}<br>
                <strong>Weighted Grade Points:</strong> ${totalWeightedGradePoints.toFixed(2)}
            `;
            document.getElementById("result").style.display = "block"; // Show result div
            document.getElementById("resetDataBtn").style.display = "inline-block"; // Show reset button
            document.getElementById("generateGradeCardBtnBottom").style.display = "inline-block"; // Show generate grade card button
            document.getElementById("sharePdfBtn").style.display = "inline-block"; // Show share PDF button
            document.getElementById("calculateSGPAButton").style.display = "none"; // Hide calculate button
        }

        function resetData() {
            // Reset Full Name
            document.getElementById("fullName").value = "";

            // Reset Stream and Cycle selections
            document.getElementById("streamSelect").value = "";
            document.getElementById("cycleSelect").value = "";
            document.getElementById("eeeCycleSelect").value = "";

            // Hide all subject sections
            document.getElementById("cycleSelection").style.display = "none";
            document.getElementById("eeeCycleSelection").style.display = "none";
            document.getElementById("cseSubjects").style.display = "none";
            document.getElementById("eeeSubjects").style.display = "none";
            document.getElementById("otherSubjects").style.display = "none";

            // Clear subject input fields (marks, names for custom, credits for custom)
            document.getElementById("cseInputs").innerHTML = "";
            document.getElementById("eeeInputs").innerHTML = "";
            document.getElementById("otherInputs").innerHTML = "";

            // Clear results
            document.getElementById("result").innerHTML = "";

            // Hide all buttons except calculate
            initializePageVisibility();

            // Reset calculated SGPA and subject results
            calculatedSGPA = "N/A";
            subjectResults = [];

            // Re-initialize based on default stream selection (which is now empty)
            handleStreamSelection();
        }


        function generateTemporaryGradeCardContent() {
            const name = document.getElementById("fullName").value || "Student";
            const streamSelectElement = document.getElementById("streamSelect");
            const stream = streamSelectElement.options[streamSelectElement.selectedIndex].text || "Not Selected";

            const currentDate = new Date();
            const dateString = currentDate.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
            const timeString = currentDate.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', hour12: true });

            let tableRows = '';
            subjectResults.forEach(subj => {
                const status = subj.letterGrade === 'F' ? 'FAIL' : (subj.invalid ? 'INVALID INPUT' : 'PASS');
                tableRows += `
                    <tr>
                        <td>${subj.name}</td>
                        <td>${subj.credits}</td>
                        <td>${subj.marks === undefined || isNaN(subj.marks) ? 'N/A' : subj.marks}</td>
                        <td>${subj.letterGrade}</td>
                        <td>${subj.gradePoint}</td>
                        <td>${status}</td>
                    </tr>
                `;
            });

            return `
                <div class="grade-card-header">
                    <div class="left">${window.location.href}</div>
                    <div class="center">SGPA REPORT</div>
                    <div class="right">${dateString}<br>${timeString}</div>
                </div>
                <p><strong>Name:</strong> ${name}</p>
                <p><strong>Stream:</strong> ${stream}</p>
                <hr style="margin: 2rem 0; border: 0; border-top: 1px solid #ccc;">
                <table>
                    <thead>
                        <tr>
                            <th>Subject Name</th>
                            <th>Credits</th>
                            <th>Marks</th>
                            <th>Letter Grade</th>
                            <th>Grade Point</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${tableRows}
                    </tbody>
                </table>
                <div class="grade-card-final-sgpa">
                    ${calculatedSGPA} SGPA
                </div>
                <div class="grade-card-footer">This web is created with ❤️ by ABHISHEK BAGEWADI</div>
            `;
        }

        // This function improves the grade card image download for mobile and desktop
        function generateTemporaryGradeCardAndDownload() {
            if (!validateInputs(true)) {
                return;
            }
            calculateSGPA(); // Recalculate to ensure latest data is used for grade card

            const gradeCardContentDiv = document.getElementById("grade-card-content");
            gradeCardContentDiv.innerHTML = generateTemporaryGradeCardContent();

            // Show modal
            const gradeCardModal = document.getElementById("grade-card-modal");
            gradeCardModal.style.display = "flex";

            let scale = window.devicePixelRatio || 2;
            if (window.innerWidth < 600) scale = 3;

            setTimeout(() => {
                html2canvas(gradeCardContentDiv, {
                    scale: scale,
                    useCORS: true,
                    backgroundColor: "#fff",
                    scrollX: 0,
                    scrollY: 0,
                    windowWidth: gradeCardContentDiv.scrollWidth,
                    windowHeight: gradeCardContentDiv.scrollHeight
                }).then(canvas => {
                    const image = canvas.toDataURL("image/jpeg", 0.95);
                    const link = document.createElement('a');
                    const name = document.getElementById("fullName").value || "Student";
                    link.href = image;
                    link.download = `${name.replace(/\s+/g, '_')}_SGPA_Grade_Card.jpeg`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                });
            }, 300);
        }

        async function shareResultAsPdf() {
            if (!validateInputs(true)) {
                return;
            }
            calculateSGPA(); // Ensure data is up-to-date

            const gradeCardContentDiv = document.getElementById("grade-card-content");
            gradeCardContentDiv.innerHTML = generateTemporaryGradeCardContent(); // Populate for canvas

            // Temporarily show modal content to render correctly for html2canvas
            const gradeCardModal = document.getElementById("grade-card-modal");
            gradeCardModal.style.display = "flex";
            gradeCardModal.style.visibility = "hidden"; // Hide it from user view while rendering

            let scale = window.devicePixelRatio || 2;
            if (window.innerWidth < 600) scale = 3;

            try {
                const canvas = await html2canvas(gradeCardContentDiv, {
                    scale: scale,
                    useCORS: true,
                    backgroundColor: "#fff",
                    scrollX: 0,
                    scrollY: 0,
                    windowWidth: gradeCardContentDiv.scrollWidth,
                    windowHeight: gradeCardContentDiv.scrollHeight
                });

                const imgData = canvas.toDataURL('image/jpeg', 0.95);
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF('p', 'mm', 'a4'); // 'p' for portrait, 'mm' for millimeters, 'a4' for A4 size

                const imgWidth = 190; // Image width in mm (A4 width is 210mm, leaving 10mm margin on each side)
                const pageHeight = doc.internal.pageSize.height;
                const imgHeight = (canvas.height * imgWidth) / canvas.width;
                let heightLeft = imgHeight;
                let position = 10; // Start position from top with a 10mm margin

                doc.addImage(imgData, 'JPEG', 10, position, imgWidth, imgHeight);
                heightLeft -= pageHeight;

                // If content is taller than one page, add new pages
                while (heightLeft >= 0) {
                    position = heightLeft - imgHeight + 10;
                    doc.addPage();
                    doc.addImage(imgData, 'JPEG', 10, position, imgWidth, imgHeight);
                    heightLeft -= pageHeight;
                }

                const name = document.getElementById("fullName").value || "Student";
                const pdfFileName = `${name.replace(/\s+/g, '_')}_SGPA_Grade_Card.pdf`;

                // Convert PDF to Blob for sharing
                const pdfBlob = doc.output('blob');

                // Try to use Web Share API
                if (navigator.share && navigator.canShare && navigator.canShare({ files: [new File([pdfBlob], pdfFileName, { type: 'application/pdf' })] })) {
                    await navigator.share({
                        files: [new File([pdfBlob], pdfFileName, { type: 'application/pdf' })],
                        title: 'SGPA Grade Card',
                        text: `Check out my SGPA Grade Card for ${name}!`,
                    });
                } else {
                    // Fallback for browsers that don't support Web Share API or for desktop
                    doc.save(pdfFileName);
                    alert("PDF downloaded. You can manually share it from your downloads.");
                }

            } catch (error) {
                console.error("Error generating or sharing PDF:", error);
                alert("Failed to generate or share PDF. Please try again.");
            } finally {
                // Hide modal content after processing
                gradeCardModal.style.display = "none";
                gradeCardModal.style.visibility = "visible"; // Reset visibility
            }
        }


        document.getElementById('close-modal').addEventListener('click', () => {
            document.getElementById('grade-card-modal').style.display = 'none';
        });
        document.getElementById('grade-card-modal').addEventListener('click', (event) => {
            if (event.target === document.getElementById('grade-card-modal')) {
                document.getElementById('grade-card-modal').style.display = 'none';
            }
        });

        // Initialize button visibility when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            handleStreamSelection(); // This will also call initializePageVisibility internally
            initializePageVisibility();
        });
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-LDX0K93M5E"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-LDX0K93M5E');
    </script>
</body>
</html>
